<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/admin-layout.html}">
<head>
  <title>Quản lý Máy tính</title>
  <meta charset="utf-8">
</head>
<body>
<div layout:fragment="content">
  <h1>Quản lý Máy tính</h1>

  <a th:href="@{/admin/computer-form}" class="btn btn-primary mb-3">Thêm máy tính mới</a>

  <form th:action="@{/admin/manage-computers}" method="get" class="form-inline mb-3">
    <input type="text" name="keyword" th:value="${keyword}" class="form-control mr-2" placeholder="Tìm theo tên máy..."/>
    <button type="submit" class="btn btn-info">Tìm kiếm</button>
  </form>

  <table class="table table-bordered table-striped">
    <thead>
    <tr>
      <th>Mã máy</th>
      <th>Tên máy</th>
      <th>Loại máy</th>
      <th>Trạng thái</th>
      <th>Hành động</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="computer : ${computerPage.content}">
      <td th:text="${computer.maMay}"></td>
      <td th:text="${computer.tenMay}"></td>
      <td th:text="${computer.loaiMay.tenLoaiMay}"></td>
      <td th:text="${computer.trangThai}"></td>
      <td>
        <a th:href="@{/admin/computer-form/{id}(id=${computer.maMay})}" class="btn btn-warning btn-sm">Sửa</a>

        <button th:onclick="|deleteItem('${computer.maMay}', '/api/manager/computers/' + '${computer.maMay}')|"
                class="btn btn-danger btn-sm">Xóa</button>
      </td>
    </tr>
    </tbody>
  </table>

  <nav aria-label="Page navigation" th:if="${computerPage.totalPages > 1}">
    <ul class="pagination">
      <li class="page-item" th:classappend="${computerPage.hasPrevious()} ? '' : 'disabled'">
        <a class="page-link" th:href="@{/admin/manage-computers(page=${computerPage.number}, size=${computerPage.size}, keyword=${keyword})}">Trước</a>
      </li>

      <li class="page-item" th:each="pageNumber : ${pageNumbers}" th:classappend="${pageNumber == computerPage.number + 1} ? 'active' : ''">
        <a class="page-link" th:href="@{/admin/manage-computers(page=${pageNumber}, size=${computerPage.size}, keyword=${keyword})}" th:text="${pageNumber}"></a>
      </li>

      <li class="page-item" th:classappend="${computerPage.hasNext()} ? '' : 'disabled'">
        <a class="page-link" th:href="@{/admin/manage-computers(page=${computerPage.number + 2}, size=${computerPage.size}, keyword=${keyword})}">Sau</a>
      </li>
    </ul>
  </nav>
</div>
</body>
</html>