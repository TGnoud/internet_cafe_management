<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/admin-layout :: layout(~{::title}, ~{::mainContent})}">
<head>
  <title>Quản Lý Ưu Đãi</title>
  <meta charset="utf-8">
</head>
<body>
<main th:fragment="mainContent">
  <h2 class="section-title">Danh Sách Chương Trình Ưu Đãi</h2>
  <a th:href="@{/admin/promotions/add}" class="btn-add">Thêm Ưu Đãi Mới</a>
  <div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>

  <table>
    <thead>
    <tr>
      <th>Mã Ưu Đãi</th>
      <th>Nội Dung/Tên Chương Trình</th>
      <th>Mức Ưu Đãi (%)</th>
      <th>Hành Động</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="ud : ${danhSachUuDai}"> <td th:text="${ud.maUuDai}">UD001</td>
      <td th:text="${ud.noiDung}">Giảm giá cuối tuần</td>
      <td th:text="${ud.mucUuDai != null ? #numbers.formatDecimal(ud.mucUuDai, 0, 'COMMA', 2, 'POINT') + '%' : 'N/A'}">10%</td>
      <td class="action-buttons">
        <a th:href="@{/admin/promotions/edit/{maUuDai}(maUuDai=${ud.maUuDai})}" class="btn-edit">Sửa</a>
        <button class="btn-delete" th:attr="onclick=|confirmDelete('/api/manager/promotions/' + '${ud.maUuDai}', 'ưu đãi')|">Xóa</button>
      </td>
    </tr>
    <tr th:if="${#lists.isEmpty(danhSachUuDai)}">
      <td colspan="4" style="text-align: center;">Không có chương trình ưu đãi nào.</td>
    </tr>
    </tbody>
  </table>
  <script th:src="@{/js/admin-common.js}"></script>
</main>
</body>
</html>